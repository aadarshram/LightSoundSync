Version 4.1
SHEET 1 2356 680
WIRE 368 -464 336 -464
WIRE 480 -464 448 -464
WIRE 592 -464 560 -464
WIRE 672 -464 592 -464
WIRE 592 -448 592 -464
WIRE 928 -400 928 -432
WIRE 992 -400 928 -400
WIRE 928 -368 928 -400
WIRE 592 -352 592 -384
WIRE 928 -256 928 -288
WIRE 992 -256 928 -256
WIRE 1088 -256 1056 -256
WIRE 928 -208 928 -256
WIRE -256 32 -256 0
WIRE 224 64 176 64
WIRE 368 64 288 64
WIRE -768 80 -768 -32
WIRE -592 80 -592 -32
WIRE 928 96 928 48
WIRE 304 128 304 112
WIRE 368 144 368 64
WIRE 368 144 336 144
WIRE 432 144 368 144
WIRE 544 144 512 144
WIRE 176 160 176 64
WIRE 176 160 144 160
WIRE 272 160 176 160
WIRE 352 176 336 176
WIRE -768 192 -768 160
WIRE -592 192 -592 160
WIRE 304 208 304 192
WIRE 928 224 928 176
WIRE 928 224 880 224
WIRE 928 272 928 224
WIRE 928 384 928 352
FLAG 304 112 0
FLAG 304 208 VCC
IOPIN 304 208 In
FLAG 352 176 V_REF
IOPIN 352 176 In
FLAG 544 144 V_FB
IOPIN 544 144 In
FLAG 144 160 V_CTRL
IOPIN 144 160 Out
FLAG -592 192 0
FLAG -592 -32 VCC
IOPIN -592 -32 Out
FLAG 928 384 0
FLAG 880 224 V_FB
IOPIN 880 224 Out
FLAG 672 -464 V_OUT
IOPIN 672 -464 Out
FLAG 928 48 Vbp_in
IOPIN 928 48 In
FLAG -16 -512 V_PWM
IOPIN -16 -512 In
FLAG -304 -64 V_CTRL
IOPIN -304 -64 In
FLAG -304 -16 0
FLAG -256 32 0
FLAG -64 -512 0
FLAG -80 -464 0
FLAG 0 -464 V_SW
IOPIN 0 -464 Out
FLAG -256 -80 V_PWM
IOPIN -256 -80 Out
FLAG 592 -352 0
FLAG 336 -464 V_SW
IOPIN 336 -464 In
FLAG 928 -432 V_OUT
IOPIN 928 -432 In
FLAG 992 -400 Vout_ac
IOPIN 992 -400 Out
FLAG 1088 -256 Vin_ac
IOPIN 1088 -256 In
FLAG 928 -208 Vbp_in
IOPIN 928 -208 Out
FLAG 1216 -64 0
FLAG 1216 -144 Vin_ac
IOPIN 1216 -144 Out
FLAG -768 192 0
FLAG -768 -32 V_REF
IOPIN -768 -32 Out
SYMBOL Ext_models\\MCP6001 304 160 R180
SYMATTR InstName U1
SYMBOL cap 288 48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {C_c}
SYMBOL res 528 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {R_c}
SYMBOL voltage -592 64 R0
SYMATTR InstName V_SUPPLY
SYMATTR Value {Vdd}
SYMBOL res 912 256 R0
SYMATTR InstName R_SENSE
SYMATTR Value {R_sense}
SYMBOL res 912 80 R0
SYMATTR InstName R_LED
SYMATTR Value {R_led}
SYMBOL e -256 -96 R0
SYMATTR InstName 1/Vm
SYMATTR Value {V_m1}
SYMBOL e 16 -464 R90
SYMATTR InstName Vin
SYMATTR Value {V_in}
SYMBOL ind 352 -448 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Llpf
SYMATTR Value {L_lpf}
SYMBOL cap 576 -448 R0
SYMATTR InstName Clpf
SYMATTR Value {C_lpf}
SYMBOL ind 912 -384 R0
SYMATTR InstName Lbp
SYMATTR Value {L_bp}
SYMBOL cap 1056 -272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Cbp
SYMATTR Value {C_bp}
SYMBOL voltage 1216 -160 R0
WINDOW 123 57 54 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName V1
SYMATTR Value 0
SYMBOL voltage -768 64 R0
SYMATTR InstName V_ref_s
SYMATTR Value {V_refs}
SYMBOL res 576 -480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rlpf
SYMATTR Value 0.35
TEXT 208 344 Left 2 ;Type-I Compensator
TEXT -344 96 Left 2 ;PWM Modulator
TEXT -88 -288 Left 2 ;Power Stage
TEXT 504 -296 Left 2 ;LPF
TEXT 1160 -328 Left 2 ;breakpoint
TEXT -88 576 Left 2 !.param Vdd=5 V_refs=0.25 V_m1=1 V_in=5 L_lpf=100u C_lpf=47u L_bp=1e6 C_bp=1e6 R_led=50 R_sense=5 C_c=1n R_c=10k
TEXT -88 656 Left 2 ;.tran 0 1m 0
TEXT -88 616 Left 2 !.ac dec 1e3 1e-6 1e10
RECTANGLE Normal 704 304 -32 -48 2
